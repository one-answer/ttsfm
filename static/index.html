<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="site-title">Voice Rubik's Cube</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Voice Rubik's Cube - A powerful Text-to-Speech API with multiple voice options. Convert text to natural-sounding speech with various voices and customizable instructions.">
    <meta name="description" lang="zh" content="语音魔方 - 一个强大的文本转语音API，提供多种语音选项。将文本转换为自然流畅的语音，支持多种声音和可定制的指令。">
    <meta name="keywords" content="text to speech, TTS, voice conversion, speech synthesis, AI voices, audio generation, voice rubik's cube">
    <meta name="keywords" lang="zh" content="文本转语音, TTS, 语音转换, 语音合成, AI语音, 音频生成, 语音魔方">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Voice Rubik's Cube">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://tts.aolifu.org/">

    <!-- Open Graph Meta Tags for social sharing -->
    <meta property="og:title" content="Voice Rubik's Cube - Text-to-Speech API">
    <meta property="og:title" lang="zh" content="语音魔方 - 文本转语音API">
    <meta property="og:description" content="Convert text to natural-sounding speech with multiple voice options and customizable instructions.">
    <meta property="og:description" lang="zh" content="将文本转换为自然流畅的语音，支持多种声音和可定制的指令。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tts.aolifu.org/">
    <meta property="og:image" content="https://tts.aolifu.org/logo.svg">
    <meta property="og:image:alt" content="Voice Rubik's Cube Logo">
    <meta property="og:site_name" content="Voice Rubik's Cube">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Voice Rubik's Cube - Text-to-Speech API">
    <meta name="twitter:description" content="Convert text to natural-sounding speech with multiple voice options and customizable instructions.">
    <meta name="twitter:image" content="https://tts.aolifu.org/logo.svg">
    <meta name="twitter:image:alt" content="Voice Rubik's Cube Logo">

    <!-- 样式加载错误检测脚本 -->
    <script>
    (function() {
        // 检测样式文件是否正确加载的函数
        function checkStylesLoaded() {
            // 延长检测时间到8秒，给更多时间加载样式
            setTimeout(function() {
                try {
                    var mainHeader = document.querySelector('.main-header h1');
                    // 修改检测条件，只有在明确判断出样式完全没有加载时才跳转
                    if (mainHeader &&
                        (getComputedStyle(mainHeader).color === 'rgb(0, 0, 0)' ||
                         getComputedStyle(mainHeader).color === 'rgb(51, 51, 51)' ||
                         !getComputedStyle(mainHeader).backgroundImage.includes('gradient'))) {

                        console.log("样式未正确加载，准备跳转到错误页面");
                        console.log("当前标题颜色:", getComputedStyle(mainHeader).color);
                        console.log("当前背景:", getComputedStyle(mainHeader).backgroundImage);

                        // 添加一个确认，避免错误跳转
                        var wrapperStyle = getComputedStyle(document.querySelector('.content-wrapper'));
                        if (wrapperStyle.backgroundColor === 'rgba(0, 0, 0, 0)' ||
                            wrapperStyle.boxShadow === 'none') {
                            window.location.href = 'styles-error-en.html';
                        }
                    } else {
                        console.log("样式已正确加载");
                    }
                } catch (error) {
                    console.error("样式检测出错:", error);
                }
            }, 8000); // 延长到8秒
        }
        // 页面加载后执行检测
        window.addEventListener('load', checkStylesLoaded);
    })();
    </script>
    <link rel="icon" href="./logo.svg?v=1.2" type="image/svg+xml" title="Voice Rubik's Cube Logo">
    <link rel="stylesheet" href="./styles.css?v=1.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3811349067654166"
            crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3DVW3QNZBQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3DVW3QNZBQ');
    </script>
    <!-- Prevent caching issues -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- 加载错误处理脚本 -->
    <script src="error-handler.js" defer></script>

    <!-- Structured Data for SEO (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Voice Rubik's Cube",
      "alternateName": "语音魔方",
      "url": "https://tts.aolifu.org/",
      "description": "A powerful Text-to-Speech API with multiple voice options. Convert text to natural-sounding speech with various voices and customizable instructions.",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      },
      "featureList": "Multiple voice options, Customizable speech instructions, Real-time text-to-speech conversion",
      "screenshot": "https://tts.aolifu.org/logo.svg",
      "softwareVersion": "1.2",
      "inLanguage": ["en", "zh"],
      "audience": {
        "@type": "Audience",
        "audienceType": "Developers, Content Creators, Educators"
      },
      "potentialAction": {
        "@type": "UseAction",
        "target": "https://tts.aolifu.org/"
      },
      "creator": {
        "@type": "Organization",
        "name": "Voice Rubik's Cube Team",
        "url": "https://tts.aolifu.org/"
      },
      "keywords": "text to speech, TTS, voice conversion, speech synthesis, AI voices, audio generation"
    }
    </script>

    <!-- 语言切换和翻译功能 -->
    <script>
        // 多语言支持
        const i18n = {
            en: {
                "site-title": "Voice Rubik's Cube",
                "main-title": "Voice Rubik's Cube",
                "subtitle": "Text-to-Speech API with Multiple Voice Options",
                "service-status": "Service Status",
                "queue-status": "Queue Status",
                "active-requests": "Active Requests:",
                "maximum-capacity": "Maximum Capacity:",
                "no-load": "No Load",
                "try-it-out": "Try It Out",
                "text-to-convert": "Text to Convert",
                "text-placeholder": "Enter the text you want to convert to speech...",
                "voice": "Voice",
                "instructions": "Instructions (Optional)",
                "instructions-placeholder": "e.g., Speak in a cheerful and upbeat tone",
                "generate-speech": "Generate Speech"
            },
            zh: {
                "site-title": "语音魔方",
                "main-title": "语音魔方",
                "subtitle": "支持多种语音的文本转语音 API",
                "service-status": "服务状态",
                "queue-status": "队列状态",
                "active-requests": "活动请求:",
                "maximum-capacity": "最大容量:",
                "no-load": "无负载",
                "try-it-out": "立即体验",
                "text-to-convert": "要转换的文本",
                "text-placeholder": "输入要转换为语音的文本...",
                "voice": "语音",
                "instructions": "指令（可选）",
                "instructions-placeholder": "例如：用欢快和兴奋的语气说话",
                "generate-speech": "生成语音"
            }
        };

        // 设置当前语言
        let currentLang = localStorage.getItem('ttsfm_lang') || 'en';

        // 切换语言函数
        function switchLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            localStorage.setItem('ttsfm_lang', lang);

            // 更新UI文本
            updateUILanguage();

            // 更新语言选择器状态
            const langButtons = document.querySelectorAll('.lang-btn');
            langButtons.forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // 触发页面更新
            if (typeof updateQueueSize === 'function') {
                updateQueueSize();
            }

            // 触发自定义事件，通知错误处理脚本语言已更改
            const event = new CustomEvent('languageChanged', {
                detail: { language: lang }
            });
            document.dispatchEvent(event);
        }

        // 更新UI文本
        function updateUILanguage() {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (i18n[currentLang][key]) {
                    // 如果元素是输入框，更新占位符
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = i18n[currentLang][key];
                    } else {
                        element.textContent = i18n[currentLang][key];
                    }
                }
            });

            // 更新页面标题
            document.title = i18n[currentLang]['site-title'];
        }

        // 页面加载时设置语言
        document.addEventListener('DOMContentLoaded', function() {
            // 获取URL参数中的语言设置
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');

            // 如果URL中指定了语言，优先使用它
            if (langParam && (langParam === 'en' || langParam === 'zh')) {
                currentLang = langParam;
                localStorage.setItem('ttsfm_lang', langParam);
            }

            // 设置页面语言
            document.documentElement.lang = currentLang;

            // 应用语言
            switchLanguage(currentLang);

            // 为语言按钮添加事件监听器
            const langButtons = document.querySelectorAll('.lang-btn');
            langButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    switchLanguage(lang);
                });
            });

            // 使window.currentLang全局可访问，以便错误处理脚本等可以使用
            window.currentLang = currentLang;
        });
    </script>
</head>
<body>
    <div class="app-container">
        <div class="content-wrapper">
            <!-- Header Section -->
            <header class="main-header">
                <div class="header-top">
                    <h1 data-i18n="main-title">Voice Rubik's Cube</h1>
                </div>
                <p class="subtitle" data-i18n="subtitle">Text-to-Speech API with Multiple Voice Options</p>
                <div class="header-bottom">
                    <div class="language-selector">
                        <button class="lang-btn" data-lang="en">English</button>
                        <button class="lang-btn" data-lang="zh">中文</button>
                    </div>
                </div>
            </header>

            <!-- Status Section -->
            <section class="content-section status-section">
                <h2 data-i18n="service-status">Service Status</h2>
                <div class="status-container">
                    <div class="status-card">
                        <div class="status-header">
                            <h3 data-i18n="queue-status">Queue Status</h3>
                            <div class="status-indicator" id="status-indicator"></div>
                        </div>
                        <div class="queue-stats">
                            <div class="stat-item">
                                <span class="stat-label" data-i18n="active-requests">Active Requests:</span>
                                <span class="stat-value" id="queue-size">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label" data-i18n="maximum-capacity">Maximum Capacity:</span>
                                <span class="stat-value" id="max-queue-size">-</span>
                            </div>
                        </div>
                        <div class="queue-progress-container">
                            <div class="queue-progress-bar" id="queue-progress-bar"></div>
                        </div>
                        <div class="queue-load-text" id="queue-load-text" data-i18n="no-load">No Load</div>
                    </div>
                </div>
            </section>

            <!-- Playground Section -->
            <section class="content-section playground-section">
                <h2 data-i18n="try-it-out">Try It Out</h2>
                <div class="playground-container">
                    <div class="playground-form">
                        <div class="form-group">
                            <label for="playground-text" data-i18n="text-to-convert">Text to Convert</label>
                            <textarea id="playground-text" rows="4" data-i18n="text-placeholder" placeholder="Enter the text you want to convert to speech..." inputmode="text" autocapitalize="sentences"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="playground-voice" data-i18n="voice">Voice</label>
                            <select id="playground-voice">
                                <option value="alloy">Alloy</option>
                                <option value="ash">Ash</option>
                                <option value="ballad">Ballad</option>
                                <option value="coral">Coral</option>
                                <option value="echo">Echo</option>
                                <option value="fable">Fable</option>
                                <option value="onyx">Onyx</option>
                                <option value="nova">Nova</option>
                                <option value="sage">Sage</option>
                                <option value="shimmer">Shimmer</option>
                                <option value="verse">Verse</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="playground-instructions" data-i18n="instructions">Instructions (Optional)</label>
                            <textarea id="playground-instructions" rows="2" data-i18n="instructions-placeholder" placeholder="e.g., Speak in a cheerful and upbeat tone" inputmode="text" autocapitalize="sentences"></textarea>
                        </div>
                        <button id="playground-submit" class="playground-button">
                            <i class="fas fa-play"></i> <span data-i18n="generate-speech">Generate Speech</span>
                        </button>
                    </div>
                    <div class="playground-output">
                        <div id="playground-status" class="playground-status"></div>
                        <div id="playground-audio" class="playground-audio"></div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="./script.js?v=1.2"></script>
</body>
</html>